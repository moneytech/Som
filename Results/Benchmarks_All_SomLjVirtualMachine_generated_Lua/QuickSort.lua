-- generated by SomLjVirtualMachine on Sa. Aug. 29 23:05:07 2020

local metaclass = QuickSort
local class = QuickSort._class
local function _block(f) local t = { _f = f }; setmetatable(t,Block._class); return t end
local _str = _primitives._newString
local _sym = _primitives._newSymbol
local _dbl = _primitives._newDouble
local _cl = _primitives._checkLoad

function class.sort_(self,array)
	(self):sort_low_high_(array,(1),(self):dataSize());
	return array;
end

function class.sort_low_high_(self,array,low,high)
	local pivot
	local i
	local j
	pivot = (array):at_(((low):_0p(high)):_0h((2)));
	i = low;
	j = high;
	(_block( function()
				return (i):_0lq(j)
	end )):whileTrue_(_block( function()
		(_block( function()
						return ((array):at_(i)):_0l(pivot)
		end )):whileTrue_(_block( function()
			i = (i):_0p((1))
			return i
		end ));
		(_block( function()
						return (pivot):_0l((array):at_(j))
		end )):whileTrue_(_block( function()
			j = (j):_0m((1))
			return j
		end ));
				return ((i):_0lq(j)):ifTrue_(_block( function()
			local tmp
			tmp = (array):at_(i);
			(array):at_put_(i,(array):at_(j));
			(array):at_put_(j,tmp);
			i = (i):_0p((1));
			j = (j):_0m((1))
			return j
		end ))
	end ));
	((low):_0l(j)):ifTrue_(_block( function()
				return (self):sort_low_high_(array,low,j)
	end ));
	((i):_0l(high)):ifTrue_(_block( function()
				return (self):sort_low_high_(array,i,high)
	end ));
	return self
end

function class.dataSize(self)
	return (800);
end

